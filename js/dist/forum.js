(()=>{var o={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},d:(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};(()=>{"use strict";o.r(t);const e=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/app"];var n=o.n(r);const s=flarum.core.compat["common/components/Alert"];var a=o.n(s);const c=flarum.core.compat["forum/utils/DiscussionControls"];var i=o.n(c);const l=flarum.core.compat["forum/components/EditPostComposer"];var p=o.n(l);const u=flarum.core.compat["common/Model"];var d=o.n(u);const f=flarum.core.compat["forum/components/ComposerBody"];var v=o.n(f);const y=flarum.core.compat["common/models/Discussion"];var b=o.n(y);n().initializers.add("the-turk-nodp",(function(){b().prototype.canDoublePost=d().attribute("canDoublePost"),(0,e.extend)(v().prototype,"headerItems",(function(o){if(this.attrs.nodp){var t=n().translator.trans("the-turk-nodp.forum.composer_edit.double_posting_warning_title"),e=n().translator.trans("the-turk-nodp.forum.composer_edit.double_posting_warning_description");o.add("nodp",m(a(),{dismissible:!1,title:t,type:"warning"},e),-10)}})),(0,e.extend)(i(),"replyAction",(function(){var o=n().session.user;if(o){var t=n().current.get("stream");if(!t.discussion.canDoublePost()){var e=t.posts().filter((function(t){return"comment"===t.contentType()&&t.user().id()===o.id()}));if(e.length){var r=e[e.length-1];null!=r&&r.canEdit()?(null!=n().composer.editor&&n().composer.close(),n().composer.load(p(),{post:r,nodp:!0}),n().composer.show()):(n().alerts.show(a(),{type:"error"},n().translator.trans("the-turk-nodp.forum.discussion.cannot_reply_alert_message")),n().composer.close())}}}}))}),-10)})(),module.exports=t})();
//# sourceMappingURL=forum.js.map